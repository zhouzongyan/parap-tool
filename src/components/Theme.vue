<script setup>
import { ref, onMounted, watch } from 'vue'
import Toggle from '@/components/Toggle.vue'

const theme = ref(false)

// æ£€æµ‹ä¸»é¢˜æ¨¡å¼å¹¶åŠ¨æ€è®¾ç½® theme
function detectTheme() {
  theme.value = window.matchMedia('(prefers-color-scheme: dark)').matches
}

// åˆ‡æ¢ä¸»é¢˜çŠ¶æ€
const update = () => {
  theme.value = !theme.value // åˆ‡æ¢ theme çš„å€¼
}

// åˆæ¬¡åŠ è½½æ—¶æ£€æµ‹ä¸»é¢˜
onMounted(() => {
  detectTheme()
})

// ç›‘å¬ä¸»é¢˜å˜åŒ–
watch(theme, () => {
  const themeName = theme.value ? 'dark' : 'light'
  document.documentElement.setAttribute('data-theme', themeName)
})
</script>

<template>
  <Toggle :toggleValue="theme" @update:modelValue="update">
    <template #open>
      ğŸŒ› <!-- å¤œé—´æ¨¡å¼å›¾æ ‡ -->
    </template>
      â˜€ï¸ <!-- ç™½å¤©æ¨¡å¼å›¾æ ‡ -->
  </Toggle>
</template>

<style scoped>
/* å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ ·å¼ */
</style>